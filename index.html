<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Tho Lnoob Update - Verify</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
      color: #fff;
    }

    #captcha-box {
      width: 90%;
      max-width: 420px;
      padding: 30px;
      background: #0d1117;
      border-radius: 15px;
      box-shadow: 0 0 25px rgba(0, 255, 200, 0.7);
      text-align: center;
      animation: fadeIn 1s ease-in-out;
      z-index: 2;
    }

    #captcha-box h2 {
      margin-bottom: 20px;
      font-size: 26px;
      font-weight: bold;
      color: #00ffe0;
      text-shadow: 0 0 10px #00ffe0, 0 0 20px #00ffe0;
    }

    /* Custom Checkbox */
    .custom-checkbox {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      cursor: pointer;
      font-size: 18px;
      user-select: none;
      margin: 10px 0;
    }
    .custom-checkbox input { display: none; }
    .checkmark {
      width: 26px;
      height: 26px;
      border: 2px solid #00ffe0;
      border-radius: 6px;
      display: inline-block;
      position: relative;
      transition: 0.3s;
      box-shadow: 0 0 8px rgba(0,255,224,0.4);
    }
    .custom-checkbox:hover .checkmark {
      box-shadow: 0 0 12px rgba(0,255,224,0.7);
    }
    .custom-checkbox input:checked + .checkmark {
      background: #00ffe0;
      border-color: #00ffe0;
      box-shadow: 0 0 15px #00ffe0, 0 0 25px #00ffe0;
    }
    .custom-checkbox input:checked + .checkmark::after {
      content: "✔";
      color: #111;
      font-size: 18px;
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -55%);
      font-weight: bold;
    }

    #spinner {
      display: none;
      border: 3px solid #333;
      border-top: 3px solid #00ffe0;
      border-radius: 50%;
      width: 22px;
      height: 22px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }

    button {
      padding: 12px 25px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      background: grey;
      color: white;
      cursor: not-allowed;
      transition: 0.3s;
      margin-top: 15px;
    }
    button.enabled {
      background: #00ffe0;
      color: #111;
      cursor: pointer;
      box-shadow: 0 0 15px #00ffe0, 0 0 30px #00ffe0;
    }
    button.enabled:hover { background: #00e6cc; }

    #message { margin-top: 15px; font-weight: bold; font-size: 18px; color: #00ffe0; }
    #timer { margin-top: 10px; font-size: 16px; color: #aaa; }

    #ad-box { margin-top: 25px; font-size: 14px; color: #aaa; }
    #ad-box img { margin-top: 10px; border-radius: 8px; box-shadow: 0 0 15px rgba(0,255,200,0.4); }

    .ticker-wrap {
      position: fixed; left: 0; right: 0; bottom: 0;
      height: 40px; background: #0d1117;
      box-shadow: 0 0 15px rgba(0, 255, 200, 0.5);
      display: flex; align-items: center; overflow: hidden;
      z-index: 10; border-top: 1px solid rgba(0,255,200,0.3);
    }
    .ticker { display: inline-block; white-space: nowrap; animation: marquee 15s linear infinite; padding-left: 100%; }
    .ticker-item { 
      display: inline-block; 
      margin-right: 60px; 
      font-size: 16px; 
      font-weight: bold; 
      color: #00ffe0;
      text-shadow: 0 0 8px #00ffe0, 0 0 15px rgba(0,255,200,0.7);
    }

    @keyframes marquee { 0%{transform:translateX(0%);}100%{transform:translateX(-100%);} }
  </style>
</head>
<body>

<div id="captcha-box">
  <h2>Verify CAPTCHA</h2>
  <label class="custom-checkbox">
    <input type="checkbox" id="captcha-checkbox">
    <span class="checkmark"></span>
    I am not a robot
    <div id="spinner"></div>
  </label>
  <button id="verify-btn" disabled>Continue</button>
  <div id="message"></div>
  <div id="timer"></div>

  <div id="ad-box">
    <p><strong>Ads</strong></p>
    <img src="https://via.placeholder.com/320x100?text=Banner+Ad" alt="Ad Banner">
    <p>©Made by Tho Lnoob</p>
  </div>
</div>

<!-- 🔹 Thanh ticker chữ -->
<div class="ticker-wrap">
  <div id="ticker" class="ticker">
    <span class="ticker-item">✨ An toàn</span>
    <span class="ticker-item">⚡ Dễ sử dụng</span>
    <span class="ticker-item">💎 Uy tín</span>
    <span class="ticker-item">🌟 Chất lượng</span>
    <span class="ticker-item">🚀 Nhanh gọn</span>
  </div>
</div>

<script>
  const encodedURL = "aHR0cHM6Ly9ub3Rldm4uY29tL3NoYXJlL2RlMXY1cjQw";
  function decodeURL(encoded) { return atob(encoded); }

  const timeoutSeconds = 60; 
  let remaining = timeoutSeconds;
  const timerEl = document.getElementById("timer");
  const countdown = setInterval(() => {
    remaining--;
    timerEl.textContent = "expires later: " + remaining + " Seconds";
    if(remaining <= 0){
      clearInterval(countdown);
      alert("Captcha expired. Please reload the page to re-authenticate.");
      location.reload();
    }
  }, 1000);

  const checkbox = document.getElementById("captcha-checkbox");
  const spinner = document.getElementById("spinner");
  const verifyBtn = document.getElementById("verify-btn");
  const message = document.getElementById("message");

  checkbox.addEventListener("change", function() {
    if(checkbox.checked){
      spinner.style.display = "inline-block"; 
      checkbox.disabled = true;
      verifyBtn.disabled = true;
      verifyBtn.classList.remove("enabled");
      setTimeout(() => {
        spinner.style.display = "none"; 
        checkbox.disabled = false;
        verifyBtn.disabled = false;
        verifyBtn.classList.add("enabled");
      }, 2000);
    } else {
      verifyBtn.disabled = true;
      verifyBtn.classList.remove("enabled");
    }
  });

  verifyBtn.addEventListener("click", () => {
    if(verifyBtn.disabled) return;
    if(checkbox.checked){
      clearInterval(countdown);
      message.textContent = "Wait 3 seconds...";
      setTimeout(() => {
        window.location.href = decodeURL(encodedURL);
      }, 3000);
    }
  });

  // ===============================
  // 🔒 Chặn chuột phải + DevTools
  // ===============================
  document.addEventListener("contextmenu", function(e) {
    e.preventDefault();
    alert("🚫");
  });

  document.onkeydown = function(e) {
    if (e.keyCode == 123) { // F12
      alert("🚫");
      return false;
    }
    if (e.ctrlKey && e.shiftKey && (e.keyCode == 73 || e.keyCode == 74 || e.keyCode == 67)) {
      alert("🚫");
      return false;
    }
    if (e.ctrlKey && e.keyCode == 85) { // Ctrl+U
      alert("🚫");
      return false;
    }
    if (e.ctrlKey && e.keyCode == 83) { // Ctrl+S
      alert("🚫");
      return false;
    }
  };
</script>

</body>
</html>